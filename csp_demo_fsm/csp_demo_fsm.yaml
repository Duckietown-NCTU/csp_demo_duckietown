# Initail state of the FSM
initial_state: "JOYSTICK_CONTROL"

events: #Maps from subscribing topic to signal ids
  pressA: 
    topic: "joy_mapper_node/pub_A"
    msg_type: "BoolStamped"
    trigger: True
  pressB: 
    topic: "joy_mapper_node/pub_B"
    msg_type: "BoolStamped"
    trigger: True
  pressY:
    topic: "joy_mapper_node/pub_Y"
    msg_type: "BoolStamped"
    trigger: True
  pressX:
    topic: "joy_mapper_node/pub_X"
    msg_type: "BoolStamped"
    trigger: False    

# Define nodes 
nodes:
  stop_line_filter_node: "stop_line_filter_node/switch"

# Define state transitions
states:
  APPLE:
    transitions:
      pressB: "BANANA"
    active_nodes:
      - stop_line_filter_node
    lights: ["joystick1"]

  BANANA:
    transitions:
      pressX: "APPLE"
      pressY: "ORANGE"
    active_nodes:
      - stop_line_filter_node
    lights: ["joystick2"]

  ORANGE:
    transitions:
      pressB: "BANANA"
      pressY: "APPLE"
    active_nodes:
      - stop_line_filter_node
    lights: ["joystick3"]